var game=new Phaser.Game(800,600,Phaser.AUTO,"jogo",{preload:preload,create:create,update:update});BasicGame={Boot:function(b){}};game.state.add("Boot",BasicGame.Boot);
var scoreText,player,seFudeu=!1,dancaDaVitoria=!1,mudo=!1,passinhos=0,animaMorte=0,caiNoChao=0,objRecolhidos=0,trilha,inicioJogo=(new Date).getTime(),tempoPerdido=0,nomeVacilao="Vacil\u00e3um best\u00e3um",ultimoChute=0,frutas,soldados,carros,background,somBicudao,somLua,somVacilo,somLouco,somVeia,somTrivela,somMoral,somBoom,somZoeira,fase=1,ultimo,btnRecomecar,vitoria=!1,MobileButton=function(b,a){b.events.onInputDown.add(function(){b.isDown=!0});b.events.onInputUp.add(function(){b.isDown=!1})};
window.mobileAndTabletcheck=function(){var b=!1,a=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,
4)))b=!0;b&&$("#frase_fim").hide();return b};var mobile=window.mobileAndTabletcheck();function reiniciar(){game.time.events.removeAll();player.destroy();seFudeu&&!mudo&&trilha.play();dancaDaVitoria=seFudeu=!1;loopCount=caiNoChao=animaMorte=passinhos=0;vaiChover=1;ultimoChute=objRecolhidos=0;fase=1;create();game.input.keyboard.start();inicioJogo=(new Date).getTime();tempoPerdido=0}
function preload(){game.load.image("grama","img/chao.jpg");game.load.image("asfalto","img/asfalto.jpg");game.load.spritesheet("JaoChutaFruta","img/JaoChutaFruta.png",100,130,7);game.load.image("soldado1","img/sold1.png");game.load.image("soldado2","img/sold2.png");game.load.image("soldado3","img/sold3.png");game.load.image("soldado4","img/sold4.png");game.load.image("carro","img/honda.png");game.load.image("morreu","img/morreu.png");game.load.image("button","img/reiniciar.png");game.load.spritesheet("explode",
"img/explode.png",128,128);game.load.audio("trilha",["audio/trilha.ogg","audio/trilha.m4a"]);game.load.audio("bicudao",["audio/bicudao.ogg","audio/bicudao.m4a"]);game.load.audio("lua",["audio/lua.ogg","audio/lua.m4a"]);game.load.audio("vacilo",["audio/vacilo.ogg","audio/vacilo.m4a"]);game.load.audio("louco",["audio/louco.ogg","audio/louco.m4a"]);game.load.audio("veia",["audio/veia.ogg","audio/veia.m4a"]);game.load.audio("trivela",["audio/trivela.ogg","audio/trivela.m4a"]);game.load.audio("moral",
["audio/moral.ogg","audio/moral.m4a"]);game.load.audio("boom",["audio/boom.ogg","audio/boom.m4a"]);game.load.audio("zoeira",["audio/zoeira.ogg","audio/zoeira.m4a"]);game.load.image("fogo1","img/fire/fire1.png");game.load.image("fogo2","img/fire/fire2.png");game.load.image("fogo3","img/fire/fire3.png");game.load.image("fumaca","img/fire/smoke-puff.png");game.load.spritesheet("laranja","img/laranja.png");game.load.spritesheet("cereja","img/cereja.png");game.load.spritesheet("maca","img/maca.png");game.load.spritesheet("morango",
"img/morango.png");game.load.spritesheet("pera","img/pera.png");game.load.spritesheet("uva","img/uva.png");game.load.spritesheet("banana","img/banana.png");game.load.spritesheet("coco","img/coco.png")}
function create(){somBicudao=game.add.audio("bicudao");somVacilo=game.add.audio("vacilo");somLouco=game.add.audio("louco");somLua=game.add.audio("lua");somVeia=game.add.audio("veia");somTrivela=game.add.audio("trivela");somMoral=game.add.audio("moral");somBoom=game.add.audio("boom");somZoeira=game.add.audio("zoeira");somLua.play();game.physics.startSystem(Phaser.Physics.ARCADE);game.physics.arcade.gravity.y=0;game.physics.arcade.gravity.x=0;game.canvas.id="canvas";background=game.add.tileSprite(0,
0,800,600,"grama");trilha&&trilha.isPlaying||(trilha=game.add.audio("trilha",1,!0),trilha.play("",0,1,!0));scoreText=game.add.text(16,16,"placar: 0",{fontSize:"32px",fill:"#FFFFFF"});player=game.add.sprite(0,game.world.height-130,"JaoChutaFruta");game.physics.arcade.enable(player);player.animations.add("right",[0,1,2,3,4,5,6,7,8],15,!0);carros=game.add.group();carros.enableBody=!0;frutas=game.add.group();frutas.enableBody=!0;soldados=game.add.group();soldados.enableBody=!0;cursor=game.input.keyboard;
inimigosFaseUm()}
function explode(b,a){objRecolhidos++;scoreText.text="Placar: "+objRecolhidos;mataSoldado=game.add.sprite(a.x-a.width/2,a.y-a.height/2,"explode");mataSoldado.animations.add("explode",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],16,!0);mataSoldado.animations.play("explode",20,!1,!0);frutas.remove(b,!0);soldados.remove(a,!0);somBoom.play();35==objRecolhidos&&(fase=2,somVacilo.stop(),somBicudao.stop(),somVeia.stop(),somLouco.play(),background.loadTexture("asfalto"),setTimeout("background.loadTexture('asfalto')",1),
setTimeout("somTrivela.play()",7E3),setTimeout(inimigosFaseDois,7E3))}function explodeCarro(b,a){a.atropela||(objRecolhidos++,scoreText.text="Placar: "+objRecolhidos,frutas.remove(b,!0),a.chutado?(carros.remove(a),mataSoldado=game.add.sprite(a.x,a.y,"explode"),mataSoldado.animations.add("explode",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],16,!0),mataSoldado.animations.play("explode",20,!1,!0),somBoom.play()):a.chutado=!0)}
function update(){arcade=game.physics.arcade;try{arcade.overlap(frutas,soldados,explode,null,this),arcade.overlap(frutas,carros,explodeCarro,null,this)}catch(b){}rightKey=cursor.addKey(Phaser.Keyboard.RIGHT);upKey=cursor.addKey(Phaser.Keyboard.UP);downKey=cursor.addKey(Phaser.Keyboard.DOWN);upKey.isDown&&-100<player.y&&!seFudeu&&(player.y-=1.5);downKey.isDown&&player.y<game.world.height-130&&!seFudeu&&(player.y+=1.5);rightKey.isDown&&!seFudeu?(player.animations.play("right"),0==ultimoChute&&chutaFruta()):
player.animations.stop();frutas.forEach(function(a){if(778==a.x||"coco"==a.key&&767<a.x)frutas.remove(a,!0);else if(sprite&&sprite.body){emitter=a.getChildAt(0);var b=-1*sprite.body.velocity.x+20,c=-1*sprite.body.velocity.y+20;emitter.minParticleSpeed.set(b,c);emitter.maxParticleSpeed.set(b,c);emitter.emitParticle();game.world.wrap(a,64)}});soldados.forEach(function(a){!0===a.alive&&a.x<game.world.bounds.x&&!seFudeu&&(trilha.stop(),somMoral.play(),a.body.acceleration.set(0),a.y=player.y+15,a.x=player.x+
15,a.body.gravity.x=0,a.body.velocity.x=0,seFudeu=!0,game.add.text(300,275,"GAME OVER",{fontSize:"32px",fill:"#FFFFFF"}),btnRecomecar=game.add.button(game.world.centerX-40,game.world.centerY+10,"button",reiniciar,this,2,1,0),teste=a)});carros.forEach(function(a){!a.atropela&&seFudeu&&carros.remove(a);a.chutado&&.7!=a.alpha?a.alpha=.7:a.chutado&&(a.alpha=1);!0===a.alive&&2>a.x&&!seFudeu&&(trilha.stop(),game.add.text(300,275,"GAME OVER",{fontSize:"32px",fill:"#FFFFFF"}),btnRecomecar=game.add.button(game.world.centerX-
40,game.world.centerY+10,"button",reiniciar,this,2,1,0),seFudeu=!0,a.atropela=!0,a.cima=!0,a.baixo=!1,a.body.acceleration.set(0),a.body.gravity.y=0,a.body.gravity.x=0,a.chutado=!1,a.x=140,a.angle=99,somZoeira.play());a.atropela&&a.cima&&(--a.y,2>=a.y&&(a.cima=!1,a.baixo=!0));a.atropela&&a.baixo&&(a.y+=1,423<=a.y&&(a.cima=!0,a.baixo=!1))});vitoria&&!seFudeu&&0==carros.length&&0==soldados.length&&(scoreText.text="M\u00e3e... No C\u00e9u tem vacilo?",morto=game.add.group(),morto.create(100,100,"morreu"),
game.add.text(600,400,"E MORREU!",{fontSize:"32px",fill:"#FFFFFF"}))}
function chutaFruta(){ultimoChute=1;var b;if(1==fase)switch(Math.floor(6*Math.random())){case 0:b="laranja";break;case 1:b="maca";break;case 2:b="morango";break;case 3:b="banana";break;case 4:b="pera";break;case 5:b="uva";break;default:b="cereja"}else b="coco";sprite=frutas.create(player.x+30,player.y+120,b);game.physics.arcade.enable(sprite);sprite.body.bounce.set(0);sprite.body.velocity.set(140,0);sprite.body.collideWorldBounds=!0;emitter=game.add.emitter(player.x+30,player.y+120,400);emitter.makeParticles(["fogo1",
"fogo2","fogo3","fumaca"]);sprite.addChild(emitter);emitter.y=10;emitter.x=-10;emitter.gravity=-20;emitter.setAlpha(1,0,1E3);emitter.setScale(.3,0,.3,0,1E3);switch(Math.floor(15*Math.random())){case 0:somBicudao.play();break;case 1:somBicudao.play();break;case 2:somBicudao.play();break;case 3:somVacilo.play();break;case 4:somVacilo.play();break;case 5:somVeia.play()}setTimeout(zeraChutes,1E3)}
function inimigosFaseUm(){var b=Math.floor(8*Math.random()),a;switch(Math.floor(4*Math.random())){case 0:a=soldados.create(800,70*b,"soldado1");break;case 1:a=soldados.create(800,70*b,"soldado2");break;case 2:a=soldados.create(800,70*b,"soldado3");break;case 3:a=soldados.create(700,70*b,"soldado4")}a.enableBody=!0;a.body.gravity.x=-5-Math.floor(6*Math.random());1!=fase||seFudeu||setTimeout(inimigosFaseUm,2500*Math.random())}
function inimigosFaseDois(){var b=Math.floor(8*Math.random()),a;if("carro"!=ultimo)a=carros.create(700,70*b,"carro"),a.body.collideWorldBounds=!0,ultimo="carro";else{switch(Math.floor(4*Math.random())){case 0:a=soldados.create(800,70*b,"soldado1");break;case 1:a=soldados.create(800,70*b,"soldado2");break;case 2:a=soldados.create(800,70*b,"soldado3");break;case 3:a=soldados.create(700,70*b,"soldado4")}ultimo="soldado"}a.enableBody=!0;a.body.gravity.x=-5-Math.floor(6*Math.random());50>objRecolhidos&&
!seFudeu?setTimeout(inimigosFaseDois,2500*Math.random()):vitoria=!0}function zeraChutes(){ultimoChute=0}function toggleMudo(){mudo?(trilha.volume=.5,mudo=game.sound.mute=!1):(trilha.volume=0,mudo=!0,game.sound.mute=!0);$("#mudo").toggleClass("mudo");$("#mudo").toggleClass("som")};
