var game=new Phaser.Game(800,600,Phaser.AUTO,"jogo",{preload:preload,create:create,update:update});BasicGame={Boot:function(a){}};game.state.add("Boot",BasicGame.Boot);
var bostaSound,cogSound,corSound,cavSound,vitoriaSound,trilha,puloSound,txtTempo,scoreText,player,cogs,cavs,cors,bostas,sons,seFudeu=!1,dancaDaVitoria=!1,mudo=!1,passinhos=0,animaMorte=0,caiNoChao=0,loopCount=0,vaiChover=1,pulos=0,objRecolhidos=0,inicioJogo=(new Date).getTime(),tempoPerdido=0,rightButton,rightButtonDown,movingRight,leftButton,leftButtonDown,movingLeft,nomeVacilao="Vacil\u00e3um best\u00e3um",MobileButton=function(a,b){a.events.onInputDown.add(function(){a.isDown=!0});a.events.onInputUp.add(function(){a.isDown=
!1})};
window.mobileAndTabletcheck=function(){var a=!1,b=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))a=
!0;a&&$("#frase_fim").hide();return a};var mobile=window.mobileAndTabletcheck();function reiniciar(){game.time.events.removeAll();player.destroy();cogs.destroy();bostas.destroy();cors.destroy();cors.destroy();vitoriaSound.stop();dancaDaVitoria=seFudeu=!1;loopCount=caiNoChao=animaMorte=passinhos=0;vaiChover=1;objRecolhidos=pulos=0;create();game.input.keyboard.start();inicioJogo=(new Date).getTime();tempoPerdido=0}
function preload(){mobile&&(game.load.image("left arrow","img/left_arrow.png"),game.load.image("right arrow","img/right_arrow.png"),game.load.image("up arrow","img/up_arrow.png"));game.load.image("sky","img/sky.png");game.load.image("ground","img/chao.png");game.load.image("coracao","img/coracao.png");game.load.image("bosta","img/bosta.png");game.load.image("cogumelo","img/cogumelo.png");game.load.image("bosta","img/bosta.png");game.load.image("caveira","img/caveira.png");game.load.spritesheet("bayer",
"img/bayer.png",32,48);game.load.spritesheet("mordente","img/mordente.png",32,48);game.load.spritesheet("carvalho","img/carvalho.png",32,48);game.load.audio("vitoriaSound",["audio/vitoria.ogg","audio/vitoria.m4a"]);game.load.audio("bostaSound",["audio/bosta.ogg","audio/bosta.m4a"]);game.load.audio("trilha",["audio/trilha.ogg","audio/trilha.m4a"]);game.load.audio("cogSound",["audio/cog.ogg","audio/cog.m4a"]);game.load.audio("corSound",["audio/derrota.ogg","audio/derrota.m4a"]);game.load.audio("cavSound",
["audio/cav.ogg","audio/cav.m4a"]);game.load.audio("puloSound",["audio/pulo.ogg","audio/pulo.m4a"]);nomeVacilao=prompt("Diz o seu nome, se vacilar feio te cadastro nos recordes!","Vacil\u00e3um best\u00e3um")}
function create(){game.physics.startSystem(Phaser.Physics.ARCADE);game.canvas.id="canvas";game.add.sprite(0,0,"sky");vitoriaSound=game.add.audio("vitoriaSound");bostaSound=game.add.audio("bostaSound");cogSound=game.add.audio("cogSound");corSound=game.add.audio("corSound");cavSound=game.add.audio("cavSound");puloSound=game.add.audio("puloSound");txtTempo=game.add.text(630,16,"00:00:00",{fontSize:"32px",fill:"#FFFFFF"});scoreText=game.add.text(16,16,"placar: 0",{fontSize:"32px",fill:"#000"});platforms=
game.add.group();platforms.enableBody=!0;var a=platforms.create(0,game.world.height-64,"ground");a.scale.setTo(2,2);a.body.immovable=!0;a=platforms.create(100,400,"ground");a.body.immovable=!0;a=platforms.create(600,300,"ground");a.body.immovable=!0;a=platforms.create(-150,250,"ground");a.body.immovable=!0;switch(Math.floor(3*Math.random())){case 0:player=game.add.sprite(32,game.world.height-150,"bayer");break;case 1:player=game.add.sprite(32,game.world.height-150,"mordente");break;case 2:player=
game.add.sprite(32,game.world.height-150,"carvalho")}game.physics.arcade.enable(player);player.body.bounce.y=.1;player.body.gravity.y=300;player.body.collideWorldBounds=!0;player.animations.add("left",[0,1,2,3],10,!0);player.animations.add("right",[5,6,7,8],10,!0);bostas=game.add.group();cogs=game.add.group();cavs=game.add.group();cors=game.add.group();bostas.enableBody=!0;cogs.enableBody=!0;cavs.enableBody=!0;cors.enableBody=!0;despencaCoisas();game.time.events.add(5*Phaser.Timer.SECOND,despencaCoisas,
this);trilha&&trilha.isPlaying||(trilha=game.add.audio("trilha",1,!0),trilha.play("",0,1,!0));mobile&&(leftButton=game.add.button(30,450,"left arrow",andarPraEsquerda),new MobileButton(leftButton,movingLeft,leftButtonDown),rightButton=game.add.button(650,450,"right arrow",andarPraDireita),new MobileButton(rightButton,movingRight,rightButtonDown),pularButton=game.add.button(350,450,"up arrow",pular))}
function toggleMudo(){mudo?(trilha.volume=.5,mudo=game.sound.mute=!1):(trilha.volume=0,mudo=!0,game.sound.mute=!0);$("#mudo").toggleClass("mudo");$("#mudo").toggleClass("som")}
function update(){mudo||(trilha.volume=.5);cors.forEachAlive(balancaCoracao,this);arcade=game.physics.arcade;arcade.collide(player,platforms);arcade.collide(cogs,platforms);arcade.collide(cavs,platforms);arcade.collide(cors,platforms);arcade.collide(bostas,platforms);arcade.overlap(player,cogs,pegaCogumelo,null,this);arcade.overlap(player,cavs,pegaCaveira,null,this);arcade.overlap(player,cors,morrer,null,this);arcade.overlap(player,bostas,pegaBosta,null,this);seFudeu&&-1.5<animaMorte?(player.rotation=
animaMorte,animaMorte-=.1):seFudeu&&(player.y+=caiNoChao,caiNoChao+=.1);txtTempo.text=imprimeTempoPerdido();dancaDaVitoria&&0>=passinhos?(player.body.velocity.x=-100,player.animations.play("left"),passinhos--,-30==passinhos&&(passinhos=1)):dancaDaVitoria&&0<passinhos&&(player.body.velocity.x=100,player.animations.play("right"),passinhos++,30==passinhos&&(passinhos=-1));cursors=game.input.keyboard.createCursorKeys();rightKey=game.input.keyboard.addKey(Phaser.Keyboard.RIGHT);leftKey=game.input.keyboard.addKey(Phaser.Keyboard.LEFT);
(leftKey.isDown||mobile&&leftButton.isDown)&&andarPraEsquerda();(rightKey.isDown||mobile&&rightButton.isDown)&&andarPraDireita();if(!cursors.left.isDown||seFudeu)if(!cursors.right.isDown||seFudeu)player.body.velocity.x=0>player.body.velocity.x?player.body.velocity.x+5:player.body.velocity.x-5,7>player.body.velocity.x&&-7<player.body.velocity.x&&(player.body.velocity.x=0,player.animations.stop()),player.frame=4;this.jumpkey=game.input.keyboard.addKey(Phaser.Keyboard.UP);this.jumpkey.onDown.add(pular,
this);vaiChover=Math.floor(2*Math.random());195<loopCount&&1==vaiChover&&(choveCoracao(),loopCount=0);loopCount++}function andarPraDireita(){seFudeu||(player.body.velocity.x=150,player.animations.play("right"))}function andarPraEsquerda(){seFudeu||(player.body.velocity.x=-150,player.animations.play("left"))}function pular(){player.body.touching.down?(player.body.velocity.y=-200,cavSound.play(),pulos=1):player.body.touching.down||1!=pulos||(player.body.velocity.y+=-200,cavSound.play(),pulos=2)}
function choveCoracao(){for(var a=[];4>a.length;){for(var b=Math.floor(12*Math.random()),c=!1,d=0;d<a.length;d++)if(a[d]==b){c=!0;break}c||(a[a.length]=b)}for(x=0;x<a.length;x++)b=cors.create(70*a[x],0,"coracao"),b.body.gravity.y=6+3*Math.floor(Math.random()),b.body.bounce.y=.9+.2*Math.random()}function balancaCoracao(a){a.body.velocity.x=2>a.x?Math.floor(80*Math.random())-50:10}
function despencaCoisas(){for(var a=0;12>a;a++){sorteiaPeca=Math.floor(3*Math.random());var b;b=0==sorteiaPeca?cogs.create(70*a,0,"cogumelo"):2==sorteiaPeca?bostas.create(70*a,0,"bosta"):cavs.create(70*a,0,"caveira");b.body.gravity.y=6;b.body.bounce.y=.7+.2*Math.random()}}function pegaBosta(a,b){b.kill();objRecolhidos++;bostaSound.play();verificaVitoria()}function pegaCaveira(a,b){b.kill();objRecolhidos++;cavSound.play();verificaVitoria()}
function morrer(a,b){dancaDaVitoria||(b.kill(),game.input.keyboard.reset(),corSound.play(),scoreText.text="Vacil\u00e3um perdeu!! PERDEDOR!11!!",arcade.overlap(a,cogs,null,null,this),arcade.overlap(a,bostas,null,null,this),arcade.overlap(a,cavs,null,null,this),seFudeu=!0)}function pegaCogumelo(a,b){b.kill();objRecolhidos++;cogSound.play();verificaVitoria()}
function verificaVitoria(){seFudeu||(24>objRecolhidos?scoreText.text="Placar: "+objRecolhidos:(scoreText.text="Us vacilu t\u00e1h edificaduh!!!",tempoPerdido=tempoPerdido=(new Date).getTime()-inicioJogo,game.input.keyboard.reset(),trilha.stop(),vitoriaSound.loop=!0,vitoriaSound.play(),dancaDaVitoria=!0,arcade.overlap(player,cors,null,null,this),enviaRecorde()))}
function enviaRecorde(){$.ajax({type:"GET",crossDomain:!0,dataType:"jsonp",url:"http://jogovacilo.2fh.co/recorde.php",data:{nome:nomeVacilao,tempo:tempoPerdido},dataType:"jsonp",timeout:1E4,success:function(a){"true"==retorno?alert("T\u00fa vacilou fei\u00e3um! Te cadastrei!!1! S2"):"false"==!retorno&&setTimeout(enviaRecorde,300)},error:function(a,b,c){console.log(b)}})}
function imprimeTempoPerdido(){seFudeu||dancaDaVitoria||(tempoPerdido=(new Date).getTime()-inicioJogo);var a,b;x=tempoPerdido;x/=1E3;a=Math.floor(x%60);x/=60;b=Math.floor(x%60);x/=60;return[pad2(Math.floor(x%24)),pad2(b),pad2(a)].join(":")}function pad2(a){return(10>a?"0":"")+a};
